<template name="deckBuild">
  {{#if generalSelected}}
  <div class="deckbuilder-container">
    <h1>Build a Deck</h1>
    <div class="deckbuilder" data-layout="layout-min">
      <div class="add-cards">
        {{> addCards}}
      </div>
    </div>
    <div class="deck-info fixed-nav">
      <label for="deck-info-toggle" class="toggle">
        <input type="checkbox" id="deck-info-toggle" class="deck-info-toggle toggle-checkbox"/>
        <i class="fa fa-expand"></i>
        <f class="fa fa-compress"></f>
      </label>
      <div class="deck-info-wrapper fixed-nav-wrapper">
        <div class="deck-stats">
          {{> deckStats}}
        </div>
        <div class="deck-list">
          {{> deckList}}
        </div>
      </div>
    </div>
    <div class="deckbuilder-settings fixed-nav">
      <label for="deckbuilder-settings-toggle" class="toggle">
        <input type="checkbox" id="deckbuilder-settings-toggle" class="deckbuilder-settings-toggle toggle-checkbox"/>
        <i class="fa fa-cog"></i>
      </label>
      <div class="deckbuilder-settings-wrapper fixed-nav-wrapper">
        <h2>Settings</h2>
        <h3>View</h3>
        <ul>
          <li><a href="#" class="set-deckbuilder-view" data-view="layout-full">Card View</a></li>
          <li><a href="#" class="active set-deckbuilder-view" data-view="layout-min">Minimum View</a></li>
        </ul>
      </div>
    </div>
  </div>
  {{else}}
    <h1>Build a Deck</h1>
    <div class="select-general">
      {{> selectGeneral}}
    </div>
  {{/if}}
</template>

<template name="deckList">
  <h2>Cards</h2>
  {{#each deckCards}}
  <div class="decklist-card">
    {{> card info=this layoutType="layout-list" hasTooltip=true}}
    <div class="decklist-card-info">
      <div class="decklist-card-caption">
        <span class="decklist-card-name">{{name}}</span><span class="decklist-card-count"> x{{count}}</span>
      </div>
      <div class="decklist-card-options">
        <button class="modCardCount removeCard-1"><i class="fa fa-minus-circle"></i></button>
        <button class="modCardCount addCard-1"><i class="fa fa-plus-circle"></i></button>
        <button class="modCardCount removeCard-all"><i class="fa fa-ban"></i></button>
      </div>
    </div>
  </div>
  {{/each}}
</template>

<template name="deckStats">
  <h2>Stats</h2>
  <h3>Mana Breakdown</h3>
  <div class="ct-chart ct-golden-section deckstat-manaCost" id="deckstat-manaCost"></div>
  <h3>Deck Breakdown</h3>
  <div class="type-counts">
    <div class="type-count">
      <span class="type-count-value">
        {{typeUnitCount}}
      </span>
      <strong>Units</strong>
    </div>
    <div class="type-count">
      <span class="type-count-value">
        {{typeSpellCount}}
      </span>
      <strong>Spells</strong>
    </div>
    <div class="type-count">
      <div class="type-count-value">
        {{typeArtifactCount}}
      </div>
      <strong>Artifacts</strong>
    </div>
  </div>
  <div class="deck-meta">
    <div class="deck-card-count">
      <span class="deck-card-count-value {{#if overDeckCardCount}}warn_too-many-cards{{/if}}">{{deckCardCount}}</span>/<strong>40</strong>
    </div>
    <div class="crafting-cost">
      <strong>Crafting Cost:</strong> <span class="crafting-cost-value">{{spiritCost}}</span>
    </div>
  </div>
</template>

<template name="addCards">
  <h2>Add Cards to Deck</h2>
  <h3>Faction Cards</h3>
  <div class="deckbuilder-cards">
    {{#each availableFactionCards}}
      {{> card info=this classes="addCard deckbuilder-card" maxCount="3" hasTooltip=true}}
    {{/each}}
  </div>
  <h3>Neutral Cards</h3>
  <div class="deckbuilder-cards">
  {{#each availableNeutralCards}}
  {{> card info=this classes="addCard deckbuilder-card" maxCount="3" hasTooltip=true}}
  {{/each}}
  </div>
  <div class="tooltip-wrapper">
    {{#each availableFactionCards}}
      {{> card info=this classes="card-tooltip" layoutType="layout-full" isTooltip=true}}
    {{/each}}
    {{#each availableNeutralCards}}
      {{> card info=this classes="card-tooltip" layoutType="layout-full" isTooltip=true}}
    {{/each}}
  </div>
</template>

<template name="selectGeneral">
  <h2>Select your General</h2>
  <div class="generals animated">
    {{#each factions}}
    {{passFaction}}
      {{#each factionGenerals faction=getFaction}}
        {{> card info=this classes="general-choice" layoutType="layout-full"}}
      {{/each}}
    {{/each}}
  </div>
</template>
